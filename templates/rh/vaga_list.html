{% extends 'base.html' %}
{% load static %}

{% block title %}Vagas Abertas{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/rh/vaga_list.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="vaga-list-container">
        <div class="page-header">
        <div class="header-content">
            <h1>Gerenciador de Vagas</h1>
            <p>Crie, edite e gerencie as vagas disponíveis na empresa.</p>
        </div>
        <a href="{% url 'criar_vaga' %}" class="btn-primary">
            <i class="fas fa-plus"></i> Nova Vaga
        </a>
    </div>

        {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

        {% if vagas %}
        <div class="vaga-grid">
            {% for vaga in vagas %}
            <div class="vaga-card">
                
                <div class="vaga-card-header">
                    <h3 class="vaga-titulo">{{ vaga.titulo }}</h3>
                                        <span class="status-badge status-{{ vaga.status }}">{{ vaga.get_status_display }}</span>
                </div>

                <div class="vaga-card-body">
                    <div class="info-row">
                        <div class="info-item">
                            <i class="fas fa-sitemap"></i>
                            <span>{{ vaga.setor.nome }}</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-id-badge"></i>
                            <span>{{ vaga.cargo.nome }}</span>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="info-item">
                            <i class="fas fa-file-contract"></i>
                            <span>{{ vaga.get_tipo_contratacao_display }}</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-dollar-sign"></i>
                            <span>
                                {% if vaga.faixa_salarial_inicial %}
                                    R$ {{ vaga.faixa_salarial_inicial }} - R$ {{ vaga.faixa_salarial_final }}
                                {% else %}
                                    A combinar
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>

                <div class="vaga-card-footer">
                    <span>Criada em {{ vaga.criado_em|date:"d/m/Y" }}</span>
                    <div class="action-buttons">
                        <a href="{% url 'editar_vaga' vaga.pk %}" class="btn-edit" title="Editar Vaga">
                            <i class="fas fa-pencil-alt"></i>
                        </a>
                                            </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="card empty-state">
            <div class="empty-state-icon"><i class="fas fa-briefcase-medical"></i></div>
            <h3>Nenhuma vaga encontrada</h3>
            <p>Não há vagas cadastradas no momento. Que tal criar a primeira?</p>
        </div>
    {% endif %}

</div>
{% endblock content %}